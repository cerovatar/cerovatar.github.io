<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalender Jawa</title>
    <style>
        :root {
            --primary-bg: #f0f2f5;
            --card-bg: #ffffff;
            --text-main: #333333;
            --text-muted: #6c757d;
            --accent-orange: #FF8C00;
            --accent-dark: #1a1a1a;
            --holiday-color: #dc3545;
            --puasa-color: #198754;
            --today-bg: #e3f2fd;
            --today-border: #2196F3;
        }

        body {
            font-family: 'Segoe UI', 'Roboto', 'Helvetica Neue', sans-serif;
            background-color: var(--primary-bg);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* --- HEADER & HAMBURGER MENU --- */
        .app-header {
            width: 100%;
            background-color: var(--accent-dark);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .header-title h1 { margin: 0; font-size: 1.4rem; letter-spacing: 1px; }
        .header-title p { margin: 2px 0 0; font-size: 0.75rem; opacity: 0.8; color: var(--accent-orange); }

        /* Tombol Hamburger */
        .hamburger {
            display: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: white;
            background: none;
            border: none;
            z-index: 1001;
        }

        /* Menu Overlay Mobile */
        .nav-overlay {
            position: fixed;
            top: 0;
            right: -100%; /* Sembunyi di kanan */
            width: 70%;
            height: 100vh;
            background: var(--accent-dark);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: right 0.3s ease-in-out;
            z-index: 999;
            box-shadow: -5px 0 15px rgba(0,0,0,0.5);
        }

        .nav-overlay.active {
            right: 0;
        }

        .nav-overlay a {
            color: white;
            text-decoration: none;
            font-size: 1.2rem;
            margin: 15px 0;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-overlay a:hover {
            color: var(--accent-orange);
        }

        /* Kontainer Utama */
        .app-container {
            width: 95%;
            max-width: 700px;
            margin: 20px auto;
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            overflow: hidden;
            border-top: 6px solid var(--accent-orange);
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            flex-wrap: wrap;
            gap: 10px;
        }

        .nav-btn {
            background: none;
            border: 1px solid #ddd;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            color: var(--text-main);
        }

        .nav-btn:hover { background-color: var(--accent-orange); color: white; border-color: var(--accent-orange); }

        .current-date-label {
            font-size: 1.2rem;
            font-weight: 700;
            text-transform: capitalize;
            text-align: center;
            flex-grow: 1;
        }

        .select-group { display: flex; gap: 8px; }

        select {
            padding: 6px 12px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 0.9rem;
            background: #fff;
            cursor: pointer;
            outline: none;
        }

        .btn-today {
            background-color: var(--accent-orange);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            cursor: pointer;
            font-weight: 500;
        }
        
        .calendar-wrapper { padding: 20px; overflow-x: auto; }

        table { width: 100%; border-collapse: collapse; table-layout: fixed; }

        th {
            color: var(--text-muted);
            font-weight: 600;
            font-size: 0.9rem;
            padding: 10px 5px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        td {
            vertical-align: top;
            height: 90px;
            padding: 5px;
            border: 1px solid #f0f0f0;
            transition: background 0.2s;
            cursor: default;
            position: relative;
        }

        .day-number { font-size: 1.1rem; font-weight: 600; display: block; margin-bottom: 4px; }
        
        .pasaran-info {
            font-size: 0.75rem;
            color: var(--text-muted);
            display: flex;
            flex-direction: column;
            line-height: 1.2;
            margin-bottom: 4px;
        }

        .pasaran-name { font-weight: 500; }

        .neptu-value {
            font-size: 0.7rem;
            background: #eee;
            border-radius: 4px;
            width: fit-content;
            padding: 1px 4px;
            margin-top: 2px;
        }

        /* Badge Event */
        .event-badge {
            display: inline-block;
            font-size: 0.7rem;
            padding: 2px 4px;
            border-radius: 4px;
            margin-top: 2px;
            width: 100%;
            box-sizing: border-box;
            text-align: center;
            font-weight: 600;
        }

        .badge-holiday { background-color: #f8d7da; color: var(--holiday-color); border: 1px solid #f5c6cb; }
        .badge-puasa { background-color: #d1e7dd; color: var(--puasa-color); border: 1px solid #badbcc; }
        
        /* Styling Khusus */
        td.holiday .day-number, td.sunday .day-number { color: var(--holiday-color); }
        td.puasa .day-number { color: var(--puasa-color); }
        td.today { background-color: var(--today-bg); border: 2px solid var(--today-border); }
        td.empty { background-color: #fcfcfc; cursor: default; }

        footer {
            margin-top: auto;
            background-color: var(--accent-dark);
            color: white;
            text-align: center;
            padding: 15px;
            width: 100%;
            font-size: 0.9rem;
        }

        @media (max-width: 600px) {
            /* Tampilkan hamburger di HP */
            .hamburger { display: block; }
            
            .app-container { width: 100%; border-radius: 0; margin: 0; box-shadow: none; }
            .controls { flex-direction: column; align-items: stretch; gap: 15px; }
            .header-nav { display: flex; justify-content: space-between; align-items: center; width: 100%; }
            .select-group { justify-content: center; width: 100%; }
            td { height: 70px; }
            .neptu-value { display: none; }
            .event-badge { font-size: 0.6rem; line-height: 1.1; }
        }
    </style>
</head>

<body>

    <!-- Header & Hamburger Menu -->
    <div class="app-header">
        <div class="header-title">
            <h1>Kalender Jawa</h1>
            <p>Penanggalan Jawa, Weton & Ramadhan</p>
        </div>
        <!-- Tombol Hamburger -->
        <button class="hamburger" onclick="toggleMenu()"><i class="fas fa-bars"></i></button>
    </div>

    <!-- Menu Overlay (Navigasi Samping) -->
    <div class="nav-overlay" id="navOverlay">
        <a href="home.html">Home</a>
        <a href="neptu.html">Neptu</a>
        <a href="Caljawa.html">Kalender Jawa</a>
        <a href="Game.html">Game</a>
        <a href="porto.html">Portofolio</a>
    </div>

    <div class="app-container">
        <div class="controls">
            <div class="header-nav">
                <button class="nav-btn" id="prevBtn">&lt;</button>
                <button class="btn-today" id="todayBtn">Hari Ini</button>
                <button class="nav-btn" id="nextBtn">&gt;</button>
            </div>
            
            <div class="current-date-label" id="monthYearDisplay"></div>
            <div class="select-group">
                <select id="monthSelect"></select>
                <select id="yearSelect"></select>
            </div>
        </div>

        <div class="calendar-wrapper">
            <table id="calendarTable">
                <thead>
                    <tr>
                        <th>Min</th>
                        <th>Sen</th>
                        <th>Sel</th>
                        <th>Rab</th>
                        <th>Kam</th>
                        <th>Jum</th>
                        <th>Sab</th>
                    </tr>
                </thead>
                <tbody id="calendarBody"></tbody>
            </table>
        </div>
        
        <div style="padding: 0 20px 20px; font-size: 0.8rem; color: #666;">
            <span style="color: var(--holiday-color); font-weight:bold;">● Merah:</span> Libur Nasional &nbsp; 
            <span style="color: var(--puasa-color); font-weight:bold;">● Hijau:</span> Puasa (Ramadhan/Senin Kamis)
        </div>
    </div>

    <footer>
        <p>Created by &copy; <span>ZinXploit</span></p>
    </footer>

    <!-- Tambahkan Font Awesome agar icon muncul -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <script>
        // --- SCRIPT MENU HAMBURGER ---
        function toggleMenu() {
            const nav = document.getElementById('navOverlay');
            nav.classList.toggle('active');
        }

        // --- KONFIGURASI KALENDER ---
        const namaHari = ["Minggu", "Senin", "Selasa", "Rabu", "Kamis", "Jumat", "Sabtu"];
        const namaPasaran = ["Legi", "Pahing", "Pon", "Wage", "Kliwon"];
        const namaBulan = ["Januari", "Februari", "Maret", "April", "Mei", "Juni", "Juli", "Agustus", "September", "Oktober", "November", "Desember"];

        const monthYearDisplay = document.getElementById('monthYearDisplay');
        const calendarBody = document.getElementById('calendarBody');
        const monthSelect = document.getElementById('monthSelect');
        const yearSelect = document.getElementById('yearSelect');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const todayBtn = document.getElementById('todayBtn');

        let currentDate = new Date();
        let currentMonth = currentDate.getMonth();
        let currentYear = currentDate.getFullYear();
        
        // --- DATA LIBUR NASIONAL ---
        const holidays = {
            2024: ["01-01", "02-10", "03-11", "03-12", "04-01", "04-09", "04-10", "04-11", "05-01", "05-09", "05-20", "06-01", "06-17", "06-18", "07-07", "08-17", "12-25"],
            2025: ["01-01", "01-28", "01-29", "03-30", "03-31", "04-01", "05-01", "06-01", "06-07", "08-17", "12-25"],
            2026: ["01-01", "02-17", "03-19", "03-20", "04-14", "05-01", "08-17", "12-25"]
        };

        // --- DATA PUASA ---
        // Fungsi Helper untuk membuat rentang tanggal Ramadhan
        function generateRamadhanDates(year, startMonth, startDay, duration) {
            let dates = [];
            let d = new Date(year, startMonth - 1, startDay);
            for (let i = 0; i < duration; i++) {
                let m = String(d.getMonth() + 1).padStart(2, '0');
                let day = String(d.getDate()).padStart(2, '0');
                dates.push(`${m}-${day}`);
                d.setDate(d.getDate() + 1);
            }
            return dates;
        }

        const puasaDays = {
            // Tahun 2024: Ramadhan mulai 11 Maret (perkiraan umum), durasi 30 hari
            2024: generateRamadhanDates(2024, 3, 11, 30), 
            
            // Tahun 2025: Ramadhan mulai 28 Februari (perkiraan), durasi 30 hari
            2025: generateRamadhanDates(2025, 2, 28, 30),
            
            // Tahun 2026: Ramadhan mulai 17 Februari (perkiraan), durasi 30 hari
            2026: generateRamadhanDates(2026, 2, 17, 30),
            
            // Bisa tambahkan tahun berikutnya di sini dengan pola yang sama
        };

        // --- FUNGSI UTILITY ---

        function getPasaran(date) {
            const refDate = new Date(2024, 0, 1); // Senin Pahing
            const diffTime = date - refDate;
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            let pasaranIndex = (1 + diffDays) % 5;
            if (pasaranIndex < 0) pasaranIndex += 5;
            return namaPasaran[pasaranIndex];
        }

        function getNeptu(hariIndex, pasaranIndex) {
            const neptuHari = [5, 4, 3, 7, 8, 6, 9];
            const neptuPasaran = [5, 9, 7, 4, 8];
            return neptuHari[hariIndex] + neptuPasaran[pasaranIndex];
        }

        function isHoliday(month, day, year) {
            const mStr = String(month + 1).padStart(2, '0');
            const dStr = String(day).padStart(2, '0');
            const key = `${mStr}-${dStr}`;
            return holidays[year] ? holidays[year].includes(key) : false;
        }

        function isPuasa(month, day, year, dayIndex) {
            const mStr = String(month + 1).padStart(2, '0');
            const dStr = String(day).padStart(2, '0');
            const key = `${mStr}-${dStr}`;
            
            // Cek apakah tanggal ini ada di data Ramadhan/Statis
            const isStaticPuasa = puasaDays[year] ? puasaDays[year].includes(key) : false;

            // Cek Puasa Sunnah Senin Kamis
            let isSeninKamis = (dayIndex === 1 || dayIndex === 4); 

            // Jika hari ini Libur Nasional, maka bukan hari puasa Sunnah Senin Kamis
            // (Kecuali bulan Ramadhan yang memang wajib)
            if (isHoliday(month, day, year)) {
                if (!isStaticPuasa) isSeninKamis = false;
            }

            return isStaticPuasa || isSeninKamis;
        }

        // --- RENDER ---

        function populateSelects() {
            namaBulan.forEach((bulan, index) => {
                const opt = document.createElement('option');
                opt.value = index;
                opt.text = bulan;
                monthSelect.appendChild(opt);
            });
            const startYear = currentYear - 50;
            const endYear = currentYear + 50;
            for (let i = startYear; i <= endYear; i++) {
                const opt = document.createElement('option');
                opt.value = i;
                opt.text = i;
                yearSelect.appendChild(opt);
            }
            monthSelect.value = currentMonth;
            yearSelect.value = currentYear;
        }

        function renderCalendar(month, year) {
            monthYearDisplay.textContent = `${namaBulan[month]} ${year}`;
            calendarBody.innerHTML = "";

            const firstDayOfMonth = new Date(year, month, 1);
            const lastDayOfMonth = new Date(year, month + 1, 0);
            const daysInMonth = lastDayOfMonth.getDate();
            let startDay = firstDayOfMonth.getDay(); 
            let date = 1;

            for (let i = 0; i < 6; i++) {
                const row = document.createElement('tr');
                let hasDays = false; 

                for (let j = 0; j < 7; j++) {
                    const cell = document.createElement('td');

                    if (i === 0 && j < startDay) {
                        cell.classList.add('empty');
                    } else if (date > daysInMonth) {
                        cell.classList.add('empty');
                    } else {
                        hasDays = true;
                        const dateObj = new Date(year, month, date);
                        const dayIndex = dateObj.getDay(); 
                        const hariName = namaHari[dayIndex];
                        const pasaranName = getPasaran(dateObj);
                        const pasaranIndex = namaPasaran.indexOf(pasaranName);
                        const neptu = getNeptu(dayIndex, pasaranIndex);

                        // Cek Status
                        const isSunday = (dayIndex === 0);
                        const isNatHoliday = isHoliday(month, date, year);
                        const isToday = (date === currentDate.getDate() && month === currentDate.getMonth() && year === currentDate.getFullYear());
                        const isFastingDay = isPuasa(month, date, year, dayIndex);

                        // Set Kelas CSS
                        let className = "";
                        if (isToday) className += " today";
                        if (isSunday || isNatHoliday) className += " holiday"; 
                        if (isFastingDay && !isNatHoliday) className += " puasa"; 

                        if (className) cell.className = className.trim();

                        // Konten HTML
                        let content = `<span class="day-number">${date}</span>`;
                        content += `<div class="pasaran-info">
                                        <span class="pasaran-name">${pasaranName}</span>
                                        <span class="neptu-value">${neptu}</span>
                                     </div>`;
                        
                        // Badge Event
                        let badgeHtml = "";
                        
                        if (isNatHoliday) {
                            badgeHtml = `<div class="event-badge badge-holiday">Libur</div>`;
                        } else if (isFastingDay) {
                            let labelPuasa = "Puasa";
                            if (dayIndex === 1) labelPuasa = "Senin";
                            else if (dayIndex === 4) labelPuasa = "Kamis";
                            
                            // Cek khusus apakah ini bulan Ramadhan dengan mengecek array
                            const mStr = String(month + 1).padStart(2, '0');
                            const dStr = String(date).padStart(2, '0');
                            const key = `${mStr}-${dStr}`;
                            const isRamadhan = puasaDays[year] && puasaDays[year].includes(key);

                            if (isRamadhan) labelPuasa = "Ramadhan";
                            
                            badgeHtml = `<div class="event-badge badge-puasa">${labelPuasa}</div>`;
                        }

                        cell.innerHTML = content + badgeHtml;
                        date++;
                    }
                    row.appendChild(cell);
                }

                if (!hasDays && i > 0) break;
                calendarBody.appendChild(row);
            }
        }

        // --- EVENT LISTENERS ---

        prevBtn.addEventListener('click', () => {
            currentMonth--;
            if (currentMonth < 0) { currentMonth = 11; currentYear--; }
            updateControlsAndRender();
        });

        nextBtn.addEventListener('click', () => {
            currentMonth++;
            if (currentMonth > 11) { currentMonth = 0; currentYear++; }
            updateControlsAndRender();
        });

        monthSelect.addEventListener('change', (e) => {
            currentMonth = parseInt(e.target.value);
            renderCalendar(currentMonth, currentYear);
        });

        yearSelect.addEventListener('change', (e) => {
            currentYear = parseInt(e.target.value);
            renderCalendar(currentMonth, currentYear);
        });

        todayBtn.addEventListener('click', () => {
            const now = new Date();
            currentMonth = now.getMonth();
            currentYear = now.getFullYear();
            currentDate = now; 
            updateControlsAndRender();
        });

        function updateControlsAndRender() {
            monthSelect.value = currentMonth;
            yearSelect.value = currentYear;
            renderCalendar(currentMonth, currentYear);
        }

        populateSelects();
        renderCalendar(currentMonth, currentYear);

    </script>
</body>

</html>

